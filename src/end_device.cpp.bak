#include <HardwareSerial.h>          
#include <Arduino.h>                 

HardwareSerial XBee(2);   
int LED_PIN = 33;
int time_check = random(1000, 15000);           

void setup() {
  Serial.begin(115200);                
  delay(3000);  // Wait for Serial Monitor
  
  Serial.println("=============================");
  Serial.println("END DEVICE STARTING...");
  Serial.println("=============================");
  
  // Pin setup
  pinMode(LED_PIN, OUTPUT);
  digitalWrite(LED_PIN, LOW);  
  XBee.begin(9600, SERIAL_8N1, 25, 26);  
  delay(1000);
}

void blinkLED() {
  digitalWrite(LED_PIN, HIGH);  
  delay(1000);
  digitalWrite(LED_PIN, LOW);   
  delay(1000);
}

void loop() {
  int randomNumber = random(256);  
  
  // Send the message
  XBee.print('<');                   
  XBee.print(randomNumber);          
  XBee.print('>');                 
  
  // Detailed logging
  // Serial.println("=============================");
  Serial.print("Sending: ");
  Serial.println(randomNumber);
  // Serial.print("Bytes sent: ");
  // Serial.print(XBee.availableForWrite());
  // Serial.println(" buffer space available");
  // Serial.println("=============================");

  blinkLED(); 
  delay(time_check);  
}
